<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="_csrf" th:content="${_csrf.token}"/>
        <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
        <title>Novo Item - Backlog</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÆ</text></svg>">
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <link rel="stylesheet" th:href="@{/css/cadastro.css}">
    </head>
    <body>

        <h1>üìù Adicionar Novo Item</h1>

        <div class="card" style="display: block;"> <form id="form-cadastro">

            <div class="form-group">
                <label for="titulo">T√≠tulo:</label>
                <input type="text" id="titulo" placeholder="Ex: God of War" required>
            </div>

            <div class="form-group">
                <label for="tipo">Tipo:</label>
                <select id="tipo" required onchange="atualizarStatusDinamico()">
                    <option value="Jogo">Jogo</option>
                    <option value="Filme">Filme</option>
                    <option value="S√©rie">S√©rie</option>
                </select>
            </div>

            <div class="form-group">
                <label for="status">Status:</label>
                <select id="status" required>
                    <option id="opt-concluido" value="Zerado">Zerado / Assistido</option>
                    <option id="opt-andamento" value="Jogando">Jogando / Assistindo</option>
                    <option value="Dropado">Desisti (Dropado)</option>
                    <option value="Backlog">Na fila (Backlog)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="imagemUrl">Link da Imagem (URL):</label>

                <div class="busca-capa-group">
                    <input type="text" id="imagemUrl" name="imagemUrl" placeholder="Cole o link ou busque üëâ" onchange="atualizarPreview()">

                    <button type="button" id="btn-busca-capa" class="btn-busca-capa" title="Buscar capa na internet">
                        üîç
                    </button>
                </div>

                <img id="preview-img" src="" alt="Pr√©via" style="display:none; margin-top:10px; max-width: 100px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
            </div>

            <div class="form-group">
                <label for="nota">Nota (0-10):</label>
                <input type="number" id="nota" step="0.1" min="0" max="10" placeholder="Ex: 9.5" required>
            </div>

            <div class="form-group">
                <label for="resenha">Resenha r√°pida:</label>
                <textarea id="resenha" rows="3" placeholder="O que achou da experi√™ncia?"></textarea>
            </div>

            <div style="margin-top: 20px;">
                <button type="submit" class="btn-salvar">Salvar Item</button>
                <a href="/home" class="btn-cancelar">Cancelar</a>
            </div>
        </form>
        </div>

        <div id="modalCapas" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üé¨ Escolha a Capa</h3>
                    <button class="close-modal">‚úñ</button>
                </div>

                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <input type="text" id="buscaCapaInput" placeholder="Digite o nome do filme/s√©rie...">
                    <button type="button" onclick="buscarCapaApi()" style="width: auto;">Buscar</button>
                </div>

                <div id="resultadosCapas" class="grid-capas">
                    <p style="color: #666; grid-column: 1/-1; text-align: center;">Os resultados aparecer√£o aqui...</p>
                </div>
            </div>
        </div>

        <script th:src="@{/js/script.js}"></script>
    </body>
</html>